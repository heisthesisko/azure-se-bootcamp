
flowchart TB
  subgraph OnPrem (Hyper-V)
    Web[(Apache Web)]
    DB[(PostgreSQL)]
    AI[(AI Model Server)]
    VyOS[VyOS VPN]
  end
  subgraph Azure
    VNet["VNet + Subnets"]
    SA["Storage Account (Blob/Files/Queue/Table/ADLS Gen2)"]
    VM["Ubuntu VM"]
    KV["Key Vault"]
    PE["Private Endpoints"]
  end
  Web -->|SAS| SA
  AI -->|Upload + Queue| SA
  DB -->|Logs (Table)| SA
  VyOS -. VPN .- VNet
  VNet --> PE --> SA
  VM --> SA
