# VyOS IPsec (sample). Replace placeholders before applying.
set vpn ipsec ike-group azure-ike key-exchange ikev2
set vpn ipsec ike-group azure-ike lifetime 28800
set vpn ipsec ike-group azure-ike proposal 10 encryption aes256
set vpn ipsec ike-group azure-ike proposal 10 hash sha256

set vpn ipsec esp-group azure-esp proposal 10 encryption aes256
set vpn ipsec esp-group azure-esp proposal 10 hash sha256
set vpn ipsec esp-group azure-esp lifetime 3600
set vpn ipsec esp-group azure-esp pfs disable

set vpn ipsec site-to-site peer <AZURE_VPN_PUBLIC_IP> authentication mode pre-shared-secret
set vpn ipsec site-to-site peer <AZURE_VPN_PUBLIC_IP> authentication pre-shared-secret <PSK>
set vpn ipsec site-to-site peer <AZURE_VPN_PUBLIC_IP> ike-group azure-ike
set vpn ipsec site-to-site peer <AZURE_VPN_PUBLIC_IP> default-esp-group azure-esp
set vpn ipsec site-to-site peer <AZURE_VPN_PUBLIC_IP> local-address <ONPREM_PUBLIC_IP>
set vpn ipsec site-to-site peer <AZURE_VPN_PUBLIC_IP> tunnel 1 local prefix <ONPREM_PREFIX>
set vpn ipsec site-to-site peer <AZURE_VPN_PUBLIC_IP> tunnel 1 remote prefix <AZURE_PREFIX>
commit; save
