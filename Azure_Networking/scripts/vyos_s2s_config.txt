# VyOS S2S IPsec config sample for Azure VPN Gateway
# Replace placeholders: <LOCAL_PUBLIC_IP>, <LOCAL_LAN_CIDR>, <AZURE_GATEWAY_PUBLIC_IP>, <SHARED_KEY>
set vpn ipsec ike-group azure-ike proposal 1 encryption aes256
set vpn ipsec ike-group azure-ike proposal 1 hash sha256
set vpn ipsec ike-group azure-ike lifetime 28800
set vpn ipsec esp-group azure-esp proposal 1 encryption aes256
set vpn ipsec esp-group azure-esp proposal 1 hash sha256
set vpn ipsec esp-group azure-esp lifetime 3600
set vpn ipsec site-to-site peer <AZURE_GATEWAY_PUBLIC_IP> authentication mode pre-shared-secret
set vpn ipsec site-to-site peer <AZURE_GATEWAY_PUBLIC_IP> authentication pre-shared-secret <SHARED_KEY>
set vpn ipsec site-to-site peer <AZURE_GATEWAY_PUBLIC_IP> ike-group azure-ike
set vpn ipsec site-to-site peer <AZURE_GATEWAY_PUBLIC_IP> default-esp-group azure-esp
set vpn ipsec site-to-site peer <AZURE_GATEWAY_PUBLIC_IP> local-address <LOCAL_PUBLIC_IP>
set vpn ipsec site-to-site peer <AZURE_GATEWAY_PUBLIC_IP> tunnel 1 local prefix <LOCAL_LAN_CIDR>
set vpn ipsec site-to-site peer <AZURE_GATEWAY_PUBLIC_IP> tunnel 1 remote prefix 10.10.0.0/16
commit; save
